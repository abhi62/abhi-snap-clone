(this.webpackJsonpsnap=this.webpackJsonpsnap||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){"use strict";a.r(t);var c=a(2),n=a.n(c),s=a(29),i=a.n(s),r=(a(79),a(80),a(54)),o=a.n(r),l=a(43),j=a.n(l),u=a(34),d=Object(u.b)({name:"camera",initialState:{cameraImage:null},reducers:{setCameraImage:function(e,t){e.cameraImage=t.payload},resetCameraImage:function(e){e.cameraImage=null}}}),b=d.actions,m=b.setCameraImage,h=b.resetCameraImage,p=function(e){return e.camera.cameraImage},O=d.reducer,f=a(12),g=a(6),x=(a(86),a(4)),v={width:250,height:400,facingMode:"user"};var _=function(){var e=Object(c.useRef)(null),t=Object(f.b)(),a=Object(g.f)(),n=Object(c.useCallback)((function(){var c=e.current.getScreenshot();t(m(c)),a.push("/preview")}),[e]);return Object(x.jsxs)("div",{className:"webcamCapture",children:[Object(x.jsx)(o.a,{audio:!1,height:v.height,ref:e,screenshotFormat:"image/jpeg",width:v.width,videoConstraints:v}),Object(x.jsx)(j.a,{className:"webcamCapture__button",onClick:n,fontSize:"large"})]})},w=a(47),N=(a(92),a(60)),I=a.n(N),C=a(61),k=a.n(C),S=a(62),y=a.n(S),P=a(63),U=a.n(P),A=a(64),z=a.n(A),B=a(65),E=a.n(B),F=a(66),T=a.n(F),D=a(67),R=a.n(D),L=a(68),W=a.n(L),K=a(121),V=a(32),G=V.a.initializeApp({apiKey:"AIzaSyA4r4_Qb9t7y3jbA458o8845lOL2IDK83o",authDomain:"abhi-snap-clone.firebaseapp.com",projectId:"abhi-snap-clone",storageBucket:"abhi-snap-clone.appspot.com",messagingSenderId:"977899888725",appId:"1:977899888725:web:b867b12183cf95676a34dc",measurementId:"G-FKS19H7E6T"}).firestore(),J=V.a.auth(),M=V.a.storage(),H=new V.a.auth.GoogleAuthProvider,Q=Object(u.b)({name:"app",initialState:{user:null,selectedImage:null},reducers:{login:function(e,t){e.user=t.payload},logout:function(e){e.user=null},selectedImage:function(e,t){e.selectedImage=t.payload},resetImage:function(e){e.selectedImage=null}}}),$=Q.actions,q=$.login,X=$.logout,Y=($.resetImage,$.selectedImage),Z=function(e){return e.app.user},ee=function(e){return e.app.selectedImage},te=Q.reducer;var ae=function(){var e=Object(f.c)(p),t=Object(g.f)(),a=Object(f.b)(),n=Object(f.c)(Z);return Object(c.useEffect)((function(){e||t.replace("/")}),[e,t]),Object(x.jsxs)("div",{className:"preview",children:[Object(x.jsx)(I.a,{onClick:function(){a(h())},className:"preview__close"}),Object(x.jsxs)("div",{className:"preview__toolbarRight",children:[Object(x.jsx)(k.a,{}),Object(x.jsx)(y.a,{}),Object(x.jsx)(U.a,{}),Object(x.jsx)(z.a,{}),Object(x.jsx)(E.a,{}),Object(x.jsx)(T.a,{}),Object(x.jsx)(R.a,{})]}),Object(x.jsx)("img",{src:e,alt:""}),Object(x.jsxs)("div",{onClick:function(){var a=Object(K.a)();M.ref("posts/".concat(a)).putString(e,"data_url").on("state_changed",null,(function(e){console.log(e)}),(function(){M.ref("posts").child(a).getDownloadURL().then((function(e){G.collection("posts").add({imageUrl:e,username:n.username,read:!1,profilePic:n.profilePic,timestamp:V.a.firestore.FieldValue.serverTimestamp()}),t.replace("/chats")}))}))},className:"preview__footer",children:[Object(x.jsx)("h2",{children:"Send Now"}),Object(x.jsx)(W.a,{fontSize:"small",className:"preview__sendIcon"})]})]})},ce=a(45),ne=a(122),se=a(119),ie=a(71),re=a.n(ie),oe=(a(95),a(70)),le=a.n(oe),je=a(69),ue=a.n(je);var de=function(e){var t=e.id,a=e.profilePic,c=e.username,n=e.timestamp,s=e.imageUrl,i=e.read,r=Object(f.b)(),o=Object(g.f)();return Object(x.jsxs)("div",{onClick:function(){i||(r(Y(s)),G.collection("posts").doc(t).set({read:!0},{merge:!0}),o.push("/chats/view"))},className:"chat",children:[Object(x.jsx)(ne.a,{className:"chat__avatar",src:a}),Object(x.jsxs)("div",{className:"chat__info",children:[Object(x.jsx)("h4",{children:c}),Object(x.jsxs)("p",{children:[!i&&"Tap to view -"," ",Object(x.jsx)(ue.a,{date:new Date(null===n||void 0===n?void 0:n.toDate()).toUTCString()})]})]}),!i&&Object(x.jsx)(le.a,{className:"chat__readIcon"})]})};a(98);var be=function(){var e=Object(c.useState)([]),t=Object(ce.a)(e,2),a=t[0],n=t[1],s=Object(f.c)(Z),i=Object(f.b)(),r=Object(g.f)();return Object(c.useEffect)((function(){G.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){return n(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),Object(x.jsxs)("div",{className:"chats",children:[Object(x.jsxs)("div",{className:"chats__header",children:[Object(x.jsx)(ne.a,{src:s.profilePic,onClick:function(){return J.signOut()},className:"chats__avatar"}),Object(x.jsxs)("div",{className:"chats__search",children:[Object(x.jsx)(re.a,{className:"chats__searchIcon"}),Object(x.jsx)("input",{type:"text",placeholder:"Friends"})]}),Object(x.jsx)(se.a,{className:"chats__chatIcon"})]}),Object(x.jsx)("div",{className:"chats__posts",children:a.map((function(e){var t=e.id,a=e.data,c=a.profilePic,n=a.username,s=a.timestamp,i=a.imageUrl,r=a.read;return Object(x.jsx)(de,{id:t,timestamp:s,username:n,imageUrl:i,read:r,profilePic:c},t)}))}),Object(x.jsx)(j.a,{className:"chats__takePicIcon",onClick:function(){i(h()),r.push("/")},fontSize:"large"})]})},me=(a(99),a(72));var he=function(){var e=Object(f.c)(ee),t=Object(g.f)();Object(c.useEffect)((function(){e||a()}),[e]);var a=function(){t.replace("/chats")};return Object(x.jsxs)("div",{className:"chatView",children:[Object(x.jsx)("img",{src:e,onClick:a,alt:""}),Object(x.jsx)("div",{className:"chatView__timer",children:Object(x.jsx)(me.CountdownCircleTimer,{isPlaying:!0,duration:10,strokeWidth:6,size:50,colors:[["#004777",.33],["#F7B801",.33],["#A30000",.33]],children:function(e){var t=e.remainingTime;return 0===t&&a(),t}})})]})},pe=a(120);a(100);var Oe=function(){var e=Object(f.b)();return Object(x.jsx)("div",{className:"login",children:Object(x.jsxs)("div",{className:"login__container",children:[Object(x.jsx)("img",{src:"https://scx2.b-cdn.net/gfx/news/2017/1-snapchat.jpg",alt:""}),Object(x.jsx)(pe.a,{variant:"outlined",onClick:function(){J.signInWithPopup(H).then((function(t){e(q({username:t.user.displayName,profilePic:t.user.photoURL,id:t.user.uid}))})).catch((function(e){return alert(e.message)}))},children:"Sign in"})]})})};var fe=function(){var e=Object(f.c)(Z),t=Object(f.b)();return Object(c.useEffect)((function(){J.onAuthStateChanged((function(e){t(e?q({username:e.displayName,profilePic:e.photoURL,id:e.uid}):X())}))}),[]),Object(x.jsx)("div",{className:"app",children:Object(x.jsx)(w.a,{children:e?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("img",{className:"app__logo",src:"https://lakeridgenewsonline.com/wp-content/uploads/2020/04/snapchat.jpg",alt:""}),Object(x.jsx)("div",{className:"app__body",children:Object(x.jsx)("div",{className:"app__bodyBackground",children:Object(x.jsxs)(g.c,{children:[Object(x.jsx)(g.a,{path:"/chats/view",children:Object(x.jsx)(he,{})}),Object(x.jsx)(g.a,{path:"/chats",children:Object(x.jsx)(be,{})}),Object(x.jsx)(g.a,{path:"/preview",children:Object(x.jsx)(ae,{})}),Object(x.jsx)(g.a,{path:"/",exact:!0,children:Object(x.jsx)(_,{})})]})})})]}):Object(x.jsx)(Oe,{})})})},ge=Object(u.a)({reducer:{app:te,camera:O}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(x.jsx)(n.a.StrictMode,{children:Object(x.jsx)(f.a,{store:ge,children:Object(x.jsx)(fe,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},79:function(e,t,a){},80:function(e,t,a){},86:function(e,t,a){},92:function(e,t,a){},95:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){}},[[101,1,2]]]);
//# sourceMappingURL=main.c94a9749.chunk.js.map